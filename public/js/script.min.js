/* Add class raw javascript */

function hasClass(ele,cls) {
    return !!ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function removeClass(element, className) {
    if (element && hasClass(element,className)) {
        var reg = new RegExp('(\\s|^)'+className+'(\\s|$)');
        element.className = ' ' + element.className.replace(reg,'') + ' ';
    }
}

function addClass(element, className) {
    if (element && !hasClass(element,className)) {
        element.className += '  '+ className + '  ';
    }
}


function ajaxify(linkEl, callback) {
	document.querySelectorAll(linkEl).forEach(function(el) {
		var url = el.attributes.href.value;
		el.addEventListener('click', function(event) {
			event.preventDefault();

			var xmlhttp = new XMLHttpRequest();

			xmlhttp.onreadystatechange = function() {
				if (xmlhttp.readyState == XMLHttpRequest.DONE ) {
					if (xmlhttp.status == 200) {
						callback(xmlhttp.responseText);
					} else if (xmlhttp.status == 400) {
						console.log('There was an error 400');
					} else {
						console.log('something else other than 200 was returned');
						console.log(xmlhttp.responseText);
					}
				}
			};

			xmlhttp.open("GET", url, true);
			xmlhttp.send();
		}, false);
	});
}

function injectPartial(partialEl, containerEl, response) {
	var container = document.querySelector(containerEl);
	container.innerHTML = "";
	var doc = new DOMParser().parseFromString(response, 'text/html');
	var content = doc.documentElement.querySelector(partialEl);
	container.appendChild(content);
}

ajaxify('a.event', function(response){
	injectPartial('section.event', '.popup-content', response);
	addClass(document.querySelector('body'), 'popup-active');
});

ajaxify('a.post', function(response){
	injectPartial('article.post', '.popup-content', response);
	addClass(document.querySelector('body'), 'popup-active');
});

document.querySelectorAll('.close-popup, .popup-overlay').forEach(function(el) {
	el.addEventListener('click', function(event) {
		removeClass(document.querySelector('body'), 'popup-active');
	}, false);
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxpdGllcy5qcyIsImFqYXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBBZGQgY2xhc3MgcmF3IGphdmFzY3JpcHQgKi9cblxuZnVuY3Rpb24gaGFzQ2xhc3MoZWxlLGNscykge1xuICAgIHJldHVybiAhIWVsZS5jbGFzc05hbWUubWF0Y2gobmV3IFJlZ0V4cCgnKFxcXFxzfF4pJytjbHMrJyhcXFxcc3wkKScpKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgaWYgKGVsZW1lbnQgJiYgaGFzQ2xhc3MoZWxlbWVudCxjbGFzc05hbWUpKSB7XG4gICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCcoXFxcXHN8XiknK2NsYXNzTmFtZSsnKFxcXFxzfCQpJyk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gJyAnICsgZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShyZWcsJycpICsgJyAnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgaWYgKGVsZW1lbnQgJiYgIWhhc0NsYXNzKGVsZW1lbnQsY2xhc3NOYW1lKSkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSArPSAnICAnKyBjbGFzc05hbWUgKyAnICAnO1xuICAgIH1cbn0iLCJcblxuZnVuY3Rpb24gYWpheGlmeShsaW5rRWwsIGNhbGxiYWNrKSB7XG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwobGlua0VsKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG5cdFx0dmFyIHVybCA9IGVsLmF0dHJpYnV0ZXMuaHJlZi52YWx1ZTtcblx0XHRlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHR2YXIgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG5cdFx0XHR4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09IFhNTEh0dHBSZXF1ZXN0LkRPTkUgKSB7XG5cdFx0XHRcdFx0aWYgKHhtbGh0dHAuc3RhdHVzID09IDIwMCkge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2soeG1saHR0cC5yZXNwb25zZVRleHQpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoeG1saHR0cC5zdGF0dXMgPT0gNDAwKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnVGhlcmUgd2FzIGFuIGVycm9yIDQwMCcpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnc29tZXRoaW5nIGVsc2Ugb3RoZXIgdGhhbiAyMDAgd2FzIHJldHVybmVkJyk7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyh4bWxodHRwLnJlc3BvbnNlVGV4dCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHR4bWxodHRwLm9wZW4oXCJHRVRcIiwgdXJsLCB0cnVlKTtcblx0XHRcdHhtbGh0dHAuc2VuZCgpO1xuXHRcdH0sIGZhbHNlKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGluamVjdFBhcnRpYWwocGFydGlhbEVsLCBjb250YWluZXJFbCwgcmVzcG9uc2UpIHtcblx0dmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyRWwpO1xuXHRjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblx0dmFyIGRvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcocmVzcG9uc2UsICd0ZXh0L2h0bWwnKTtcblx0dmFyIGNvbnRlbnQgPSBkb2MuZG9jdW1lbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IocGFydGlhbEVsKTtcblx0Y29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xufVxuXG5hamF4aWZ5KCdhLmV2ZW50JywgZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRpbmplY3RQYXJ0aWFsKCdzZWN0aW9uLmV2ZW50JywgJy5wb3B1cC1jb250ZW50JywgcmVzcG9uc2UpO1xuXHRhZGRDbGFzcyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JyksICdwb3B1cC1hY3RpdmUnKTtcbn0pO1xuXG5hamF4aWZ5KCdhLnBvc3QnLCBmdW5jdGlvbihyZXNwb25zZSl7XG5cdGluamVjdFBhcnRpYWwoJ2FydGljbGUucG9zdCcsICcucG9wdXAtY29udGVudCcsIHJlc3BvbnNlKTtcblx0YWRkQ2xhc3MoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLCAncG9wdXAtYWN0aXZlJyk7XG59KTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNsb3NlLXBvcHVwLCAucG9wdXAtb3ZlcmxheScpLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcblx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXHRcdHJlbW92ZUNsYXNzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKSwgJ3BvcHVwLWFjdGl2ZScpO1xuXHR9LCBmYWxzZSk7XG59KTsiXX0=
