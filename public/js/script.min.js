function hasClass(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function removeClass(e,t){if(e&&hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=" "+e.className.replace(n,"")+" "}}function addClass(e,t){e&&!hasClass(e,t)&&(e.className+="  "+t+"  ")}function forEachNl(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}function filterNl(e,t){for(var n=[],o=0;o<e.length;o++)t(e[o],o)&&n.push(e[o]);return n}function mapNl(e,t){for(var n=[],o=0;o<e.length;o++)n.push(t(e[o],o));return n}function reduceNl(e,t,n){for(var o=n,r=0;r<e.length;r++)o=t(o,e[r],r);return o}function everyNl(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0}function someNl(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1}function ajaxify(e,t){document.querySelectorAll(e).forEach(function(e){var n=e.attributes.href.value;e.addEventListener("click",function(e){e.preventDefault();var o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&(200==o.status?t(o.responseText):400==o.status?console.log("There was an error 400"):(console.log("something else other than 200 was returned"),console.log(o.responseText)))},o.open("GET",n,!0),o.send()},!1)})}function injectPartial(e,t,n){var o=document.querySelector(t);o.innerHTML="";var r=(new DOMParser).parseFromString(n,"text/html").documentElement.querySelector(e);o.appendChild(r)}function updateAgenda(){months.forEach(function(e,t){removeClass(e,"toLeft"),removeClass(e,"toRight"),removeClass(e,"currentMonth"),t<agendaIndex?addClass(e,"toLeft"):t>agendaIndex&&addClass(e,"toRight")}),addClass(months[agendaIndex],"currentMonth")}function updateTimeSelector(){document.querySelectorAll(".time-selector input").forEach(function(e,t){t===agendaIndex&&(e.checked=!0)})}function filterAgenda(e,t){forEachNl(filterNl(document.querySelectorAll(".event"),function(t){return hasClass(t,e)}),function(e){t?addClass(e,"filtered"):removeClass(e,"filtered")})}function toggleEmptyMonthMessage(){forEachNl(months,function(e){var t=e.querySelectorAll(".event"),n=e.querySelector(".no-events-in-filter"),o=someNl(t,function(e){return!hasClass(e,"filtered")});!o&&t.length?(n.innerText="Aucun évènement ne correspond à votre recherche ce mois-ci",addClass(n,"show")):o&&t.length&&removeClass(n,"show"),console.log(e)})}ajaxify(".event a",function(e){injectPartial("section.event",".popup-content",e),addClass(document.querySelector("body"),"popup-active")}),ajaxify("a.post",function(e){injectPartial("article.post",".popup-content",e),addClass(document.querySelector("body"),"popup-active")}),document.querySelectorAll(".close-popup, .popup-overlay").forEach(function(e){e.addEventListener("click",function(e){removeClass(document.querySelector("body"),"popup-active")},!1)}),addClass(document.querySelector(".agenda"),"interactive"),agendaIndex=0,months=document.querySelectorAll(".month"),document.querySelector(".controls .left").addEventListener("click",function(e){agendaIndex>0&&(agendaIndex--,updateAgenda(),updateTimeSelector())}),document.querySelector(".controls .right").addEventListener("click",function(e){agendaIndex<months.length-1&&(agendaIndex++,updateAgenda(),updateTimeSelector())}),document.querySelectorAll(".time-selector label").forEach(function(e,t){e.addEventListener("click",function(e){agendaIndex=t,updateAgenda()})}),document.querySelectorAll(".filter label").forEach(function(e,t){e.addEventListener("click",function(n){var o=document.querySelectorAll(".filter input")[t].checked;filterAgenda(e.getAttribute("for"),o),toggleEmptyMonthMessage()})});