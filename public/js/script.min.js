function hasClass(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function removeClass(e,t){if(e&&hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=" "+e.className.replace(n,"")+" "}}function addClass(e,t){e&&!hasClass(e,t)&&(e.className+="  "+t+"  ")}function forEachNl(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}function filterNl(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r],r)&&n.push(e[r]);return n}function mapNl(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}function reduceNl(e,t,n){for(var r=n,o=0;o<e.length;o++)r=t(r,e[o],o);return r}function everyNl(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0}function someNl(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1}function ajaxify(e,t){document.querySelectorAll(e).forEach(function(e){var n=e.attributes.href.value;e.addEventListener("click",function(e){e.preventDefault();var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(200==r.status?t(r.responseText):400==r.status?console.log("There was an error 400"):(console.log("something else other than 200 was returned"),console.log(r.responseText)))},r.open("GET",n,!0),r.send()},!1)})}function injectPartial(e,t,n){var r=document.querySelector(t);r.innerHTML="",currentPopup=(new DOMParser).parseFromString(n,"text/html");var o=currentPopup.documentElement.querySelector(e);r.appendChild(o)}function updateAgenda(){forEachNl(months,function(e,t){removeClass(e,"toLeft"),removeClass(e,"toRight"),removeClass(e,"currentMonth"),t<agendaIndex?addClass(e,"toLeft"):t>agendaIndex&&addClass(e,"toRight")}),addClass(months[agendaIndex],"currentMonth")}function updateTimeSelector(){forEachNl(document.querySelectorAll(".time-selector input"),function(e,t){t===agendaIndex&&(e.checked=!0)})}function filterAgenda(e,t){forEachNl(filterNl(document.querySelectorAll(".event"),function(t){return hasClass(t,e)}),function(e){t?addClass(e,"filtered"):removeClass(e,"filtered")})}function toggleEmptyMonthMessage(){forEachNl(months,function(e){var t=e.querySelectorAll(".event"),n=e.querySelector(".no-events-in-filter"),r=someNl(t,function(e){return!hasClass(e,"filtered")});!r&&t.length?(n.innerText="Aucun évènement ne correspond à votre recherche ce mois-ci.",addClass(n,"show")):r&&t.length&&removeClass(n,"show")})}ajaxify(".event a",function(e){injectPartial("article.event",".popup-content",e),addClass(document.querySelector("body"),"popup-active")}),ajaxify("a.post",function(e){injectPartial("article.post",".popup-content",e),addClass(document.querySelector("body"),"popup-active")}),forEachNl(document.querySelectorAll(".close-popup, .popup-overlay"),function(e){e.addEventListener("click",function(e){removeClass(document.querySelector("body"),"popup-active")},!1)}),addClass(document.querySelector(".agenda"),"interactive"),agendaIndex=0,months=document.querySelectorAll(".month"),document.querySelector(".controls .left").addEventListener("click",function(e){agendaIndex>0&&(agendaIndex--,updateAgenda(),updateTimeSelector())}),document.querySelector(".controls .right").addEventListener("click",function(e){agendaIndex<months.length-1&&(agendaIndex++,updateAgenda(),updateTimeSelector())}),forEachNl(document.querySelectorAll(".time-selector label"),function(e,t){e.addEventListener("click",function(e){agendaIndex=t,updateAgenda()})}),forEachNl(document.querySelectorAll(".filter label"),function(e,t){e.addEventListener("click",function(n){var r=document.querySelectorAll(".filter input")[t].checked;filterAgenda(e.getAttribute("for"),r),toggleEmptyMonthMessage()})});